<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Circles</title>

      <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
      <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
      <!--<script type="text/javascript" src="http://www.bdcc.co.uk/Gmaps/v3_ll_grat.js"></script>-->
      <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
        <script>$( function() {
            $( "#datepicker1, #datepicker2").datepicker({
              changeMonth: true,
              changeYear: true
            });
       } );</script>
	<script defer
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCbLDaUFsoSUH9Dx4R9eDVovC9Ldsky_UQ&callback=initMap">
    </script>

          <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src=" http://cdn.jsdelivr.net/jquery.cookie/1.4.1/jquery.cookie.min.js "></script>
<script>
  var csrftoken = $.cookie('csrftoken');
  function csrfSafeMethod(method) {
    // these HTTP methods do not require CSRF protection
    return (/^(GET|HEAD|OPTIONS|TRACE)$/.test(method));
  }
  $.ajaxSetup({
    beforeSend: function(xhr, settings) {
      if (!csrfSafeMethod(settings.type) && !this.crossDomain) {
        xhr.setRequestHeader("X-CSRFToken", csrftoken);
      }
    }
  });
  $(document).ready(function(){
     $("#mydiv").html("HEllo");
  $('#upload').click(function(e){
    e.preventDefault();
    $.post('/data/upload/',
      {
        id: $(this).data('id'),
{#        action: $(this).data('action')#}
      },
      function(data){
        if (data['status'] == 'ok')
        {
          $("#mydiv").html("Hello World!");
        }
        else{
            $("#mydiv").html("Bello");
    }
      }
    );
  });
  });
</script>


    <style>#map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
              html, body {
        height: 100%;
        margin: 0;
        padding: 0;
      }

    body {
        overflow-x: hidden;
    }

      #floating-header {
        position: absolute;
        top: 65%;
        left: 63%;
        background-color: #fff;
        border: 0.25px solid #999;
        border-radius: 15px;
        z-index: 5;
        padding: 5px;
        text-align: center;
        font-family: 'Roboto','sans-serif';
        line-height: 30px;
        padding-left: 10px;
      }
        .text {
              margin: 5px 5px;
              padding: 1px;
              width: 230px;
           }

        .t50 {
            width: 100px;
        }

        .button {
            padding: 0px 15px;
            margin: 5px 0px;
        }

        .button:hover {
            padding: 4px 18px;
            background: linear-gradient(rgba(0,0,0,0.4),rgba(0,0,0,0.7),rgba(0,0,0,0.4));
            color: white;
            border-radius: 10px;
            font-weight: bolder;
            border: 1px black solid;
            
        }
        .fl_h{
            margin: 5px 10px;
            color:#8612C9;
            width: 300px;
        }
    </style>
  </head>
  <body>
{#	<div id="floating-panel">#}
{#               #}
{#                 <form class="f1">#}
{#                    <div class="f2">#}
{#                    <input id="species_field" class="text" type="text"  placeholder="Type species name">#}
{#                  </div>#}
{#                  <div class="f2">#}
{#                    <input id="datepicker1" class="text t50" type="text"  placeholder="From">#}
{#                    <input id="datepicker2" class="text t50" type="text"  placeholder="To">#}
{#                  </div>s#}
{#                  #}
{#                  <button type="submit" class="button">Filter</button>#}
{#                </form>#}
{#    </div>#}
    <div id="floating-header">
      <h4 class="fl_h">Recorded Bird Observations in India</h4>
	</div>
    <div id="map"></div>
    <script>
      // This example creates circles on the map, representing populations in North
      // America.

      // First, create an object containing LatLng and population for each city.

      var circles = [];
      var showOpacity = 0.3;
      var hideOpacity = 0.0;
      var map;

      function initMap() {
		 map = new google.maps.Map(document.getElementById('map'), {
		  zoom: 5,
		  center: {lat: 22.5937, lng: 78.9629},
		  styles: [
              {
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#f5f5f5"
                  }
                ]
              },
              {
                "elementType": "labels",
                "stylers": [
                  {
                    "visibility": "off"
                  }
                ]
              },
              {
                "elementType": "labels.icon",
                "stylers": [
                  {
                    "visibility": "off"
                  }
                ]
              },
              {
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#616161"
                  }
                ]
              },
              {
                "elementType": "labels.text.stroke",
                "stylers": [
                  {
                    "color": "#f5f5f5"
                  }
                ]
              },
              {
                "featureType": "administrative.country",
                "elementType": "geometry.stroke",
                "stylers": [
                  {
                    "color": "#bec8ca"
                  },
                  {
                    "weight": 1.5
                  }
                ]
              },
              {
                "featureType": "administrative.land_parcel",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#bdbdbd"
                  }
                ]
              },
              {
                "featureType": "administrative.neighborhood",
                "stylers": [
                  {
                    "visibility": "off"
                  }
                ]
              },
              {
                "featureType": "administrative.province",
                "elementType": "geometry.stroke",
                "stylers": [
                  {
                    "color": "#a6be9e"
                  },
                  {
                    "weight": 1
                  }
                ]
              },
              {
                "featureType": "poi",
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#eeeeee"
                  }
                ]
              },
              {
                "featureType": "poi",
                "elementType": "labels.text",
                "stylers": [
                  {
                    "visibility": "off"
                  }
                ]
              },
              {
                "featureType": "poi",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#757575"
                  }
                ]
              },
              {
                "featureType": "poi.business",
                "stylers": [
                  {
                    "visibility": "off"
                  }
                ]
              },
              {
                "featureType": "poi.park",
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#e5e5e5"
                  }
                ]
              },
              {
                "featureType": "poi.park",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#9e9e9e"
                  }
                ]
              },
              {
                "featureType": "road",
                "stylers": [
                  {
                    "visibility": "off"
                  }
                ]
              },
              {
                "featureType": "road",
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#ffffff"
                  }
                ]
              },
              {
                "featureType": "road",
                "elementType": "labels.icon",
                "stylers": [
                  {
                    "visibility": "off"
                  }
                ]
              },
              {
                "featureType": "road.arterial",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#757575"
                  }
                ]
              },
              {
                "featureType": "road.highway",
                "elementType": "geometry",  
                "stylers": [
                  {
                    "color": "#dadada"
                  }
                ]
              },
              {
                "featureType": "road.highway",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#616161"
                  }
                ]
              },
              {
                "featureType": "road.local",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#9e9e9e"
                  }
                ]
              },
              {
                "featureType": "transit",
                "stylers": [
                  {
                    "visibility": "off"
                  }
                ]
              },
              {
                "featureType": "transit.line",
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#e5e5e5"
                  }
                ]
              },
              {
                "featureType": "transit.station",
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#eeeeee"
                  }
                ]
              },
              {
                "featureType": "water",
                "elementType": "geometry",
                "stylers": [
                  {
                    "color": "#c9c9c9"
                  }
                ]
              },
              {
                "featureType": "water",
                "elementType": "labels.text.fill",
                "stylers": [
                  {
                    "color": "#9e9e9e"
                  }
                ]
              }
            ]

		});
    }


	var circles = [];
	
	function repopulate(jsonloc){
            circles.forEach(function(c){
                    c.setMap(null);
	     });
            circles = [];
             console.log(jsondata.length);
		var circle;
		for (var loc in jsonloc) {
		    circle = new google.maps.Circle({
		    strokeColor: '#8612C9',
		    strokeOpacity: 0.0,
		    strokeWeight: 2,
		    fillColor: '#8612C9',
		    fillOpacity: showOpacity,
		    map: map,
		    center: {lat:jsonloc[loc].latitude, lng:jsonloc[loc].longitude},
		    radius: 200*jsonloc[loc].count
		  });

		    circles.push(cityCircle);
		   
		}
	   
	}

        

    </script>
    
  </body>
</html>
